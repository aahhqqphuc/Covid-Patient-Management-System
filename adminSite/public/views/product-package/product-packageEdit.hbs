<div class="container-fluid mt-5">
    <h1 class="mt-4">Chỉnh sửa Gói Nhu Yếu Phẩm</h1>
    <button type="button" class="btn btn-lg btn-secondary align-self-center mb-3" onclick="goBack()">Trở
        lại</button>
    <div class="card">
        <div class="card-body">
            <form method="post" action="/product-package/edit/{{id}}">
                <div class="form-group">
                    <label for="title">Tên Gói Nhu yếu phẩm</label>
                    <input type="text" required class="form-control" value='{{ten_goi}}' name="ten_goi">
                </div>
                <div class="form-group">
                    <label for="basePrice">Thời gian tối thiểu đặt hàng</label>
                    <input type="number" min="1" required class="form-control" value='{{thoi_gian}}' name="thoi_gian">
                </div>
                <div class="form-group w-25">
                    <label for="basePrice">Đơn vị thời gian</label>
                    <select name="muc_gioi_han" class="form-select form-select-md border border-secondary ">
                        <option {{#cond muc_gioi_han 0}} selected {{/cond}} value="0"> Ngày</option>
                        <option {{#cond muc_gioi_han 1}} selected {{/cond}}value="1"> Tuần</option>
                        <option {{#cond muc_gioi_han 2}} selected {{/cond}}value="2"> Tháng</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="description">Nhu yếu phẩm</label>
                    {{#cond error true}}
                    <div class="alert alert-danger" role="alert">
                        Số lượng nhu yếu phẩm phải lớn hơn một
                    </div>
                    {{/cond}}
                    <br />
                    <button type="button" class="btn btn-md btn-primary align-self-center mb-2" data-toggle="modal"
                        data-target="#removeModal">Thêm nhu yếu phẩm</button>
                    <!-- Modal -->
                    <div class="modal fade" id="removeModal" tabindex="-1" role="dialog"
                        aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
                        <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable" role="document">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <h5 class="modal-title" id="exampleModalLongTitle">Thêm nhu yếu phẩm</h5>
                                    <button type="button" class="btn-primary" data-dismiss="modal" aria-label="Close">
                                        <span class="fa fa-times" aria-hidden="true"></span>
                                    </button>
                                </div>
                                <div class="modal-body">
                                    <table class="table table-bordered" style="width:95%">
                                        <thead class="thead-dark">
                                            <tr>
                                                <th></th>
                                                <th data-filter-control='select'>Tên nhu yếu phẩm</th>
                                                <th>Hình ảnh </th>
                                            </tr>
                                        </thead>
                                        <tbody>

                                            {{#each products}}
                                            <tr>
                                                <td><input type="checkbox" name="products_selected"
                                                        value={{id_nhu_yeu_pham}}></td>
                                                <td>{{ten_sanpham}}</td>
                                                <td><img style="width: 100px; height:100px" src={{url}}></td>
                                            </tr>
                                            {{/each}}
                                        </tbody>
                                    </table>
                                </div>
                                <div class="modal-footer">
                                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Hủy</button>
                                    <button class="btn btn-primary" type="submit" name="pre_add"
                                        value="true">Thêm</button>
                                </div>
                            </div>
                        </div>
                    </div>
                    {{#if products_selected}}
                    <table class="table table-bordered" style="width:95%">
                        <thead class="thead-dark">
                            <tr>
                                <th scope="col" data-filter-control='select'>Tên nhu yếu phẩm</th>
                                <th scope="col">Hình ảnh </th>
                                <th scope="col">Giới hạn sản phẩm cho một lần đặt</th>
                                <th scope="col" class="text-end"></th>
                                <th scope="col" class="text-end"></th>
                            </tr>
                        </thead>
                        <tbody>

                            {{#each products_selected}}
                            <tr>
                                <input class="d-none" type="text" name="products" value={{id_danh_sach_goi}}>
                                <td class="d-flex justify-content-between pt-5">{{ten_sanpham}}</td>
                                <td><img style="width: 100px; height:100px" src={{url}}></td>
                                <td><input required value={{gioi_han_san_pham}} type="number" min="1"
                                        class=" form-control input-lg border-0 w-100" style="height: 100px;"
                                        name="gioi_han"></td>
                                <td class=" pt-5">
                                    <a href="/product/detail/{{id_nhu_yeu_pham}}" type="button"
                                        class="btn btn-light btn-small border border-primary"><i class="bi bi-eye"></i>
                                        Chi tiết</a>
                                </td>
                                <td class=" pt-5">
                                    <a href="/product-package/delete-product/{{id_danh_sach_goi}}" type="button"
                                        class="btn btn-light btn-small border border-danger"><i class="bi bi-eye"></i>
                                        Loại bỏ</a>
                                </td>
                            </tr>
                            {{/each}}
                        </tbody>
                    </table>
                    {{/if}}

                </div>
                <div class="d-flex ">
                    <button type="submit" class="btn btn-lg btn-primary align-self-center mr-5" value="true"
                        name="main">Cập nhật gói</button>
                </div>
            </form>



        </div>
    </div>
</div>
<script type="text/javascript">
    function goBack() {
        window.history.back();
    }
    window.onload = function () {
        console.log("init");
    };
</script>